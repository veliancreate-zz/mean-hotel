"use strict";angular.module("app",["ngRoute","ngDialog"]).config(["$routeProvider",function(t){t.otherwise({redirectTo:"/restaurants"})}]),function(){function t(t){t.when("/restaurants",{templateUrl:"/js/app/restaurants/restaurants.html",controller:"RestaurantsController",controllerAs:"vm"}).when("/menu/:restId",{templateUrl:"/js/app/menu/menu.html",controller:"MenuController",controllerAs:"vm"}).when("/payment",{templateUrl:"/js/app/payment/payment.html",controller:"PaymentController",controllerAs:"vm"}).when("/confirmation",{templateUrl:"/js/app/confirmation/confirmation.html",controller:"ConfirmationController",controllerAs:"vm"})}angular.module("app").config(t),t.$inject=["$routeProvider"]}(),function(){function t(t){var n=this;n.items=t.items}angular.module("app").controller("ConfirmationController",t),t.$inject=["cart"]}(),function(){function t(t,n,e,r,o,a){var i=this;i.items=[],t.getRestaurantDetails(n.restId).then(function(t){i.restaurant=t}),i.viewItem=function(t){i.activeItem=t,i.activeItem.options=[],e.open({template:"item.html",className:"ngdialog-theme-default",scope:r})},i.toggleOption=function(t){var n=i.activeItem.options.indexOf(t);return n>-1?void i.activeItem.options.splice(n,1):void i.activeItem.options.push(t)},i.addItem=function(t){var n={id:t.id,name:t.name,price:t.price};t.options.length>0&&(n.options=t.options.map(function(t){return{id:t.id,name:t.name,price:t.price}})),i.items.push(n),e.close(),console.log(i.items)},i.cancel=function(){e.close()},i.checkout=function(){var e={restId:n.restId,restName:i.restaurant.name,items:i.items};t.createOrder(e).then(function(t){return t.success?(a.items=i.items,o.url("/payment")):void alert("Something went wrong...")})}}angular.module("app").controller("MenuController",t),t.$inject=["api","$routeParams","ngDialog","$scope","$location","cart"]}(),function(){function t(){return{require:"ngModel",link:function(t,n,e,r){r.$validators.creditCard=function(t,n){if(!n)return!0;for(var e=n.length,r=0,o=[[0,1,2,3,4,5,6,7,8,9],[0,2,4,6,8,1,3,5,7,9]],a=0;e--;)a+=o[r][parseInt(n.charAt(e),10)],r^=1;return a%10===0&&a>0}}}}angular.module("app").directive("creditCard",t)}(),function(){function t(t,n){var e=this;e.submit=function(){e.showProgress=!0,t.placeOrder(e.card).then(function(t){return t&&t.success?n.url("/confirmation"):void alert("Something went wrong...")},function(t){alert("Something went wrong..."+t)})}}angular.module("app").controller("PaymentController",t),t.$inject=["api","$location"]}(),function(){function t(t){var n=this;t.getRestaurants().then(function(t){n.restaurants=t},function(t){console.log(t)})}angular.module("app").controller("RestaurantsController",t),t.$inject=["api"]}(),function(){function t(t){function n(){return t.get("/orders/api/restaurants").then(function(t){return t.data})}function e(n){return t.get("/orders/api/restaurant-details/"+n).then(function(t){return t.data})}function r(n){return t.post("/orders/api/create-order",n).then(function(t){return t.data})}function o(n){return t.post("/orders/api/place-order",n).then(function(t){return t.data})}return{getRestaurants:n,getRestaurantDetails:e,createOrder:r,placeOrder:o}}angular.module("app").factory("api",t),t.$inject=["$http"]}(),function(){function t(){return{items:[]}}angular.module("app").factory("cart",t)}();